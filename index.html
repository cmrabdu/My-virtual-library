<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ma BibliothÃ¨que Intelligente</title>
    <meta name="description" content="GÃ©rez votre bibliothÃ¨que personnelle avec IA">
    <!-- PWA Meta tags -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#2563eb">
    <link rel="apple-touch-icon" href="icon-192.png">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- App Container -->
    <div class="app-container">
        
        <!-- PAGE 1: ACCUEIL -->
        <div class="page" id="page-home" style="display: block;">
            <div class="page-header">
                <div class="welcome-message">
                    <h1>ğŸ‘‹ Bonjour <span id="homeUserName">Lecteur</span> !</h1>
                    <p class="welcome-subtitle">Bienvenue dans votre bibliothÃ¨que personnelle</p>
                </div>
            </div>

            <!-- Statistiques rapides -->
            <div class="stats-quick">
                <div class="stat-card stat-card-primary">
                    <div class="stat-icon">ğŸ“š</div>
                    <div class="stat-content">
                        <div class="stat-number" id="totalBooks">0</div>
                        <div class="stat-label">Livres</div>
                    </div>
                </div>
                <div class="stat-card stat-card-success">
                    <div class="stat-icon">âœ…</div>
                    <div class="stat-content">
                        <div class="stat-number" id="readBooks">0</div>
                        <div class="stat-label">Lus</div>
                    </div>
                </div>
                <div class="stat-card stat-card-info">
                    <div class="stat-icon">ğŸ“–</div>
                    <div class="stat-content">
                        <div class="stat-number" id="currentlyReading">0</div>
                        <div class="stat-label">En cours</div>
                    </div>
                </div>
            </div>

            <!-- Livres en cours -->
            <div class="section">
                <div class="section-header">
                    <h2>ğŸ“– En cours de lecture</h2>
                </div>
                <div id="currentReadingList" class="books-grid"></div>
            </div>

            <!-- Top du mois -->
            <div class="section" id="topMonthSection" style="display: none;">
                <div class="section-header">
                    <h2>ğŸ”¥ Ton Top du mois</h2>
                </div>
                <div id="topMonthList" class="books-grid"></div>
            </div>

            <!-- Recommandations -->
            <div class="section" id="recommendationsSection" style="display: none;">
                <div class="section-header">
                    <h2>ğŸ’¡ Recommandations pour toi</h2>
                </div>
                <p class="section-subtitle">ğŸ¯ BasÃ©es sur tes lectures prÃ©fÃ©rÃ©es</p>
                <div id="recommendationsList" class="books-grid"></div>
            </div>

            <!-- Derniers ajouts -->
            <div class="section">
                <h2>ğŸ†• Derniers ajouts</h2>
                <div id="recentBooksList" class="books-grid"></div>
            </div>
        </div>

        <!-- PAGE 2: BIBLIOTHÃˆQUE -->
        <div class="page" id="page-library" style="display: none;">
            <div class="page-header">
                <h1>ğŸ“š Ma BibliothÃ¨que</h1>
                <p class="library-count" id="libraryCount">0 livre</p>
            </div>

            <!-- Statistiques rapides -->
            <div class="library-quick-stats">
                <div class="quick-stat-card">
                    <div class="stat-icon">ğŸ“–</div>
                    <div class="stat-info">
                        <span class="stat-value" id="toReadCount">0</span>
                        <span class="stat-label">Ã€ lire</span>
                    </div>
                </div>
                <div class="quick-stat-card">
                    <div class="stat-icon">ğŸ“š</div>
                    <div class="stat-info">
                        <span class="stat-value" id="readingCount">0</span>
                        <span class="stat-label">En cours</span>
                    </div>
                </div>
                <div class="quick-stat-card">
                    <div class="stat-icon">âœ…</div>
                    <div class="stat-info">
                        <span class="stat-value" id="readCount">0</span>
                        <span class="stat-label">TerminÃ©s</span>
                    </div>
                </div>
            </div>

            <!-- Filtres -->
            <div class="library-filters">
                <div class="search-input-wrapper">
                    <span class="search-icon">ğŸ”</span>
                    <input type="text" id="searchBooks" placeholder="Rechercher par titre ou auteur...">
                </div>
                <div class="status-filter-chips">
                    <button class="status-chip active" data-status="">ğŸ“š Tous</button>
                    <button class="status-chip" data-status="to-read">ğŸ“– Ã€ lire</button>
                    <button class="status-chip" data-status="reading">ğŸ“• En cours</button>
                    <button class="status-chip" data-status="read">âœ… Lus</button>
                </div>
            </div>

            <div id="booksContainer">
                <div class="loading" id="loadingBooks">
                    <div class="spinner"></div>
                    Chargement...
                </div>
                <div id="booksList" class="books-grid"></div>
                <div id="emptyState" class="empty-state" style="display: none;">
                    <div class="empty-icon">ğŸ“š</div>
                    <h3>BibliothÃ¨que vide</h3>
                    <p>Commencez Ã  construire votre collection !</p>
                    <button class="btn btn-primary" onclick="navigateTo('page-add')">â• Ajouter un livre</button>
                </div>
            </div>
        </div>

        <!-- PAGE 3: AJOUTER -->
        <div class="page" id="page-add" style="display: none;">
            <div class="page-header">
                <h1>â• Ajouter un livre</h1>
            </div>

            <form id="bookForm">
                <!-- Recherche ISBN -->
                <div class="isbn-search-group">
                    <label for="isbn">ğŸ“– Recherche rapide par ISBN</label>
                    <div class="isbn-input-group">
                        <input type="text" id="isbn" placeholder="Entrez l'ISBN du livre (ex: 9782072762093)">
                        <button type="button" id="searchBtn" class="btn btn-secondary">
                            ğŸ” Rechercher
                        </button>
                    </div>
                </div>

                <div class="form-divider">
                    <span>ou remplir manuellement</span>
                </div>

                <!-- Informations principales -->
                <div class="form-group">
                    <label for="title">Titre *</label>
                    <input type="text" id="title" required placeholder="Le titre du livre">
                </div>

                <div class="form-group">
                    <label for="author">Auteur *</label>
                    <input type="text" id="author" required placeholder="Nom de l'auteur">
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="pages">Nombre de pages</label>
                        <input type="number" id="pages" placeholder="300">
                    </div>

                    <div class="form-group">
                        <label for="status">Statut</label>
                        <select id="status" required>
                            <option value="to-read">ğŸ“š Ã€ lire</option>
                            <option value="reading">ğŸ“– En cours</option>
                            <option value="read">âœ… Lu</option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label for="rating">Note</label>
                    <div class="star-rating" id="starRating">
                        <span class="star" data-rating="1">â˜†</span>
                        <span class="star" data-rating="2">â˜†</span>
                        <span class="star" data-rating="3">â˜†</span>
                        <span class="star" data-rating="4">â˜†</span>
                        <span class="star" data-rating="5">â˜†</span>
                    </div>
                    <input type="hidden" id="rating" value="0">
                </div>

                <!-- DÃ©tails optionnels -->
                <div class="form-group">
                    <label for="summary">RÃ©sumÃ© (optionnel)</label>
                    <textarea id="summary" rows="3" placeholder="Un bref rÃ©sumÃ© du livre..."></textarea>
                </div>

                <div class="form-group">
                    <label for="learnings">Apprentissages (optionnel)</label>
                    <textarea id="learnings" rows="3" placeholder="Ce que vous avez appris de ce livre..."></textarea>
                </div>

                <button type="submit" class="btn btn-primary btn-add-book">
                    âœ… Ajouter Ã  ma bibliothÃ¨que
                </button>
            </form>
        </div>

        <!-- PAGE 4: RECHERCHER -->
        <div class="page" id="page-search" style="display: none;">
            <div class="page-header">
                <h1>ğŸ” Rechercher</h1>
            </div>

            <div class="search-section">
                <div class="search-bar-container">
                    <input type="text" id="globalSearchInput" placeholder="ğŸ” Rechercher un livre, un auteur..." class="search-input-large">
                    <button id="globalSearchBtn" class="btn btn-primary">ğŸ” Rechercher</button>
                </div>

                <div class="search-filters">
                    <button class="filter-chip active" data-filter="all">ğŸŒ Tout</button>
                    <button class="filter-chip" data-filter="books">ğŸ“š Livres</button>
                    <button class="filter-chip" data-filter="authors">âœï¸ Auteurs</button>
                </div>

                <div id="searchResults" class="search-results">
                    <div class="search-placeholder">
                        <div class="search-icon">ğŸ”</div>
                        <h3>DÃ©couvrez de nouveaux livres</h3>
                        <p>Recherchez par titre, auteur ou ISBN</p>
                        <div class="search-suggestions">
                            <p style="color: #64748b; margin-top: 20px; font-size: 14px;">ğŸ”¥ Suggestions:</p>
                            <div class="suggestion-chips">
                                <button class="suggestion-chip" onclick="quickSearch('science fiction')">Science Fiction</button>
                                <button class="suggestion-chip" onclick="quickSearch('philosophie')">Philosophie</button>
                                <button class="suggestion-chip" onclick="quickSearch('business')">Business</button>
                                <button class="suggestion-chip" onclick="quickSearch('histoire')">Histoire</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- PAGE 5: PROFIL -->
        <div class="page" id="page-profile" style="display: none;">
            <div class="page-header">
                <h1>ğŸ‘¤ Mon Profil</h1>
            </div>

            <!-- Sous-onglets Profil -->
            <div class="profile-tabs">
                <button class="profile-tab active" data-tab="settings">
                    <span class="tab-icon">âš™ï¸</span>
                    <span class="tab-label">ParamÃ¨tres</span>
                </button>
                <button class="profile-tab" data-tab="stats">
                    <span class="tab-icon">ğŸ“Š</span>
                    <span class="tab-label">Statistiques</span>
                </button>
                <button class="profile-tab" data-tab="data">
                    <span class="tab-icon">ğŸ’¾</span>
                    <span class="tab-label">DonnÃ©es</span>
                </button>
            </div>

            <!-- TAB: PARAMÃˆTRES -->
            <div class="profile-tab-content" id="tab-settings" style="display: block;">
                <div class="profile-section">
                    <div class="profile-card">
                        <div class="profile-avatar">
                            <div class="avatar-circle">ğŸ“š</div>
                        </div>
                        <h2 id="userName">Lecteur</h2>
                        <p class="profile-subtitle">ğŸ“ Amateur de livres</p>
                    </div>

                    <div class="profile-stats-grid">
                        <div class="profile-stat-item">
                            <div class="profile-stat-icon">ğŸ“š</div>
                            <div class="profile-stat-info">
                                <span class="stat-value" id="profileTotalBooks">0</span>
                                <span class="stat-name">Livres</span>
                            </div>
                        </div>
                        <div class="profile-stat-item">
                            <div class="profile-stat-icon">âœ…</div>
                            <div class="profile-stat-info">
                                <span class="stat-value" id="profileReadBooks">0</span>
                                <span class="stat-name">Lus</span>
                            </div>
                        </div>
                        <div class="profile-stat-item">
                            <div class="profile-stat-icon">ğŸ“–</div>
                            <div class="profile-stat-info">
                                <span class="stat-value" id="profilePages">0</span>
                                <span class="stat-name">Pages</span>
                            </div>
                        </div>
                    </div>

                    <div class="settings-section">
                        <h3>âš™ï¸ ParamÃ¨tres</h3>
                        
                        <div class="setting-item">
                            <label for="userNameInput">
                                <span class="label-icon">ğŸ‘¤</span>
                                Nom d'utilisateur
                            </label>
                            <input type="text" id="userNameInput" placeholder="Votre nom">
                        </div>

                        <div class="setting-item">
                            <label for="yearlyGoal">
                                <span class="label-icon">ğŸ¯</span>
                                Objectif annuel de lecture
                            </label>
                            <div class="goal-input-group">
                                <input type="number" id="yearlyGoal" value="24" min="1" max="365">
                                <span class="goal-suffix">livres / an</span>
                            </div>
                        </div>

                        <button id="saveSettings" class="btn btn-primary btn-save-settings">
                            ğŸ’¾ Sauvegarder les paramÃ¨tres
                        </button>

                        <div class="about-section">
                            <p class="version-info">ğŸ“š Ma BibliothÃ¨que v0.5.5.0</p>
                            <p class="version-date">DÃ©cembre 2025 â€¢ UI/UX AmÃ©liorÃ©e</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- TAB: STATISTIQUES -->
            <div class="profile-tab-content" id="tab-stats" style="display: none;">
                <div class="stats-overview">
                    <div class="stat-card stat-card-outline">
                        <div class="stat-icon-large">ğŸ“š</div>
                        <div class="stat-number" id="totalBooks2">0</div>
                        <div class="stat-label">Total</div>
                    </div>
                    <div class="stat-card stat-card-outline">
                        <div class="stat-icon-large">ğŸ“–</div>
                        <div class="stat-number" id="toReadBooks">0</div>
                        <div class="stat-label">Ã€ lire</div>
                    </div>
                    <div class="stat-card stat-card-outline">
                        <div class="stat-icon-large">â­</div>
                        <div class="stat-number" id="averageRating">-</div>
                        <div class="stat-label">Note moyenne</div>
                    </div>
                </div>

                <div class="charts-container">
                    <div class="chart-card">
                        <div class="chart-header">
                            <h3>ğŸ“š RÃ©partition des livres</h3>
                        </div>
                        <canvas id="statusChart" width="300" height="300"></canvas>
                    </div>
                    
                    <div class="chart-card">
                        <div class="chart-header">
                            <h3>â­ Distribution des notes</h3>
                        </div>
                        <canvas id="ratingChart" width="300" height="200"></canvas>
                    </div>
                    
                    <div class="chart-card">
                        <div class="chart-header">
                            <h3>ğŸ“ˆ Ã‰volution mensuelle</h3>
                        </div>
                        <canvas id="evolutionChart" width="300" height="200"></canvas>
                    </div>
                    
                    <div class="chart-card chart-card-goal">
                        <div class="chart-header">
                            <h3>ğŸ¯ Objectif annuel</h3>
                        </div>
                        <div class="progress-container">
                            <div class="progress-bar">
                                <div class="progress-fill" id="yearlyProgress"></div>
                            </div>
                            <div class="progress-text" id="progressText">0 / 24 livres</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- TAB: DONNÃ‰ES -->
            <div class="profile-tab-content" id="tab-data" style="display: none;">
                <div class="data-section">
                    <div class="data-card">
                        <div class="data-card-header">
                            <h3>ğŸ“¦ Gestion des donnÃ©es</h3>
                            <p>Exportez ou importez votre bibliothÃ¨que</p>
                        </div>
                        <div class="data-actions">
                            <button id="exportBtn" class="btn btn-secondary btn-data">
                                ğŸ“¤ Exporter ma bibliothÃ¨que
                            </button>
                            <button id="importBtn" class="btn btn-secondary btn-data">
                                ğŸ“¥ Importer une bibliothÃ¨que
                            </button>
                            <input type="file" id="importFile" accept=".json" style="display: none;">
                        </div>
                    </div>

                    <div class="data-card data-card-danger">
                        <div class="data-card-header">
                            <h3>âš ï¸ Zone de danger</h3>
                            <p>Actions irrÃ©versibles - Ces actions supprimeront dÃ©finitivement vos donnÃ©es</p>
                        </div>
                        <div class="data-actions">
                            <button id="clearBtn" class="btn btn-danger">
                                ğŸ—‘ï¸ Supprimer toute la bibliothÃ¨que
                            </button>
                            <button id="resetBtn" class="btn btn-danger">
                                ğŸ”„ RÃ©initialiser les donnÃ©es
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- BOTTOM NAVIGATION -->
        <nav class="bottom-nav">
            <button class="nav-item active" data-page="home">
                <span class="nav-icon">ğŸ </span>
                <span class="nav-label">Accueil</span>
            </button>
            
            <button class="nav-item" data-page="search">
                <span class="nav-icon">ğŸ”</span>
                <span class="nav-label">Rechercher</span>
            </button>
            
            <button class="nav-item nav-item-center" data-page="add">
                <span class="nav-icon-large">â•</span>
            </button>
            
            <button class="nav-item" data-page="library">
                <span class="nav-icon">ğŸ“š</span>
                <span class="nav-label">BibliothÃ¨que</span>
            </button>
            
            <button class="nav-item" data-page="profile">
                <span class="nav-icon">ğŸ‘¤</span>
                <span class="nav-label">Profil</span>
            </button>
        </nav>

    </div>

    <!-- Scripts modulaires -->
    <script src="js/config.js"></script>
    <script src="js/storage.js"></script>
    <script src="js/api.js"></script>
    <script src="js/charts.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/router.js"></script>
    <script src="js/app.js"></script>

</body>
</html>
